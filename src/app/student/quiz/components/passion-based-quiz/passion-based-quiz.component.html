<div *ngIf="afiseazaRezultatul">

  <div *ngIf="!componentaAdaugata && !loading">
    <div class="d-flex justify-content-center align-items-center">
      <h1 class="header">Selectează-ți pasiunile:</h1>
    </div>


    <div class="d-flex justify-content-center" *ngFor="let _ of [1, 2, 3, 4, 5]">
      <mat-form-field>
        <mat-label>Pasiune</mat-label>
        <mat-select #select (selectionChange)="onSelect($event.value, select)">
          <mat-option *ngFor="let item of pasions" [value]="item.pasiune">{{ item.pasiune }}</mat-option>
        </mat-select>
        <mat-error *ngIf="select.errorState">Valoarea selectată deja există.</mat-error>
      </mat-form-field>
    </div>


    <button mat-flat-button color="primary" [disabled]="isButtonDisabled" (click)="onSubmit()">Trimite</button>

  </div>

  <div class="loading-container" *ngIf="loading">
    <ngx-spinner type="ball-scale-multiple" [fullScreen]="false" color="#00ecd8">
      <p style="color: white"> Loading... </p>
    </ngx-spinner>
  </div>



  <div *ngIf="response">
    <h2>Rezultatul tau:</h2>
    <div class="response-item" *ngFor="let prop of response | keyvalue">
        <span class="response-key">{{ prop.key }}:</span>
        <span class="response-value">{{ prop.value }}</span>
    </div>

    <div class="info-column">
      <div *ngIf="metrics">
        <h2>Rezultatele tale:</h2>
        <div class="response-item">
          <span class="response-key">Log Loss:</span>
          <span class="response-value">{{ metrics.LogLoss }}</span>
        </div>
        <div class="response-item">
          <span class="response-key">Log Loss Reduction:</span>
          <span class="response-value">{{ metrics.LogLossReduction }}</span>
        </div>
        <div class="response-item">
          <span class="response-key">Macro Accuracy:</span>
          <span class="response-value">{{ metrics.MacroAccuracy }}</span>
        </div>
        <div class="response-item">
          <span class="response-key">Micro Accuracy:</span>
          <span class="response-value">{{ metrics.MicroAccuracy }}</span>
        </div>
        <div class="response-item">
          <span class="response-key">Top K Accuracy:</span>
          <span class="response-value">{{ metrics.TopKAccuracy }}</span>
        </div>
        <div class="response-item">
          <span class="response-key">Top K Prediction Count:</span>
          <span class="response-value">{{ metrics.TopKPredictionCount }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Butonul de revenire -->
  <button matTooltip="Selecteaza un alt test" mat-raised-button color="primary" (click)="goBack()" class="mt-3"
    *ngIf="!loading">
    <!-- Adaugă directiva *ngIf aici -->
    <mat-icon>arrow_back</mat-icon>Înapoi
  </button>
</div>


<div *ngIf="!afiseazaRezultatul">
  <app-select-a-quiz></app-select-a-quiz>
</div>
