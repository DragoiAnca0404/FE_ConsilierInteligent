<div *ngIf="afiseazaRezultatul">
  <!-- afișează întregul conținut doar când afiseazaRezultatul este true -->
  <div *ngIf="!formularTrimis" class="d-flex justify-content-between">
    <!-- butonul Prev -->
    <div class="d-flex align-items-center">
      <button mat-fab color="primary" (click)="prevQuestion()" [disabled]="currentIndex === 0">
        <mat-icon>chevron_left</mat-icon>
      </button>
    </div>
    <!-- form cu intrebari -->
    <form (submit)="predict()">
      <div class="carousel">
        <div *ngFor="let intrebare of intrebari; let i = index" [ngClass]="{'active': i === currentIndex}">
          <p class="question-text">{{ intrebare.formulare_intrebare }}</p>
          <ul class="options-list">
            <li *ngFor="let optiune of ['Nu îmi place', 'Neutru', 'Îmi place']; let j = index">
              <label class="option-label">
                <input type="radio" [name]="'intrebare_' + i" [value]="optiune"
                  (change)="updateNumarOptiuniSelectate()">
                {{ optiune }}
              </label>
            </li>
          </ul>
        </div>
      </div>
      <div class="progress-indicator">
        Întrebarea {{currentIndex + 1}} din {{intrebari.length}}
      </div>
      <button mat-raised-button color="primary" class="mt-3" [disabled]="isButtonDisabled" type="submit">
        Trimite
      </button>
    </form>
    <!-- butonul Next -->
    <div class="d-flex align-items-center">
      <button mat-fab color="primary" (click)="nextQuestion()" [disabled]="currentIndex === intrebari.length - 1">
        <mat-icon>chevron_right</mat-icon>
      </button>
    </div>
  </div>
</div>

<!-- folosind ngSwitch pentru a comuta între afișarea rezultatului și a componentei -->
<div [ngSwitch]="afiseazaRezultatul">
  <!-- afișează rezultatul -->
  <div *ngSwitchCase="true">
    <p *ngFor="let solutie of rezultat">{{ solutie.denumire_solutie }}</p>
    <div class="report-container" *ngIf="rezultat">
      <h2>
        <mat-icon>portrait</mat-icon> Raport Personalitate Holland
      </h2>
      <div class="section" *ngFor="let sectiune of rezultat">
        <h3><b>{{ sectiune.denumire_sectiune }}</b></h3>
        <p>{{ sectiune.scurta_descriere }}</p>
      </div>


      <div class="info-column">
        <div *ngIf="metrics">
          <h2>Rezultatele tale:</h2>
          <div class="response-item">
            <span class="response-key">Log Loss:</span>
            <span class="response-value">{{ metrics.LogLoss }}</span>
          </div>
          <div class="response-item">
            <span class="response-key">Log Loss Reduction:</span>
            <span class="response-value">{{ metrics.LogLossReduction }}</span>
          </div>
          <div class="response-item">
            <span class="response-key">Macro Accuracy:</span>
            <span class="response-value">{{ metrics.MacroAccuracy }}</span>
          </div>
          <div class="response-item">
            <span class="response-key">Micro Accuracy:</span>
            <span class="response-value">{{ metrics.MicroAccuracy }}</span>
          </div>
          <div class="response-item">
            <span class="response-key">Top K Accuracy:</span>
            <span class="response-value">{{ metrics.TopKAccuracy }}</span>
          </div>
          <div class="response-item">
            <span class="response-key">Top K Prediction Count:</span>
            <span class="response-value">{{ metrics.TopKPredictionCount }}</span>
          </div>
        </div>
      </div>
    </div>

    <button *ngIf="formularTrimis" mat-raised-button style="background-color: #00ecd8; color: white;"
      (click)="generatePdf(rezultat)" class="mt-3 button-margin-right">
      <mat-icon>picture_as_pdf</mat-icon> Genereaza PDF
    </button>
    
    <button mat-raised-button color="primary" matTooltip="Selecteaza un alt test" (click)="goBack()" class="mt-3">
      <mat-icon>arrow_back</mat-icon>Înapoi
    </button>
  </div>

  <div *ngSwitchCase="false">
    <app-select-a-quiz></app-select-a-quiz>
  </div>

</div>
